<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <!-- Load the Paper.js library -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.15/paper-full.min.js"></script>
    <!-- Define inlined PaperScript associate it with myCanvas -->
    <script canvas="myCanvas">
        window.onload = function() {
            var canvas = document.getElementById('myCanvas');
            paper.setup(canvas);

            var myPath;
            var tool = new paper.Tool();

            tool.onMouseDown = function(event) {
                myPath = new paper.Path({
                    strokeColor: 'black',
                    strokeWidth: 5,
                    // selected: true,
                    strokeCap: 'round'
                });
                myPath.add(event.point);
                myPath.add(event.point); //in case no drag means no line segment
                console.log('down')
            }

            tool.onMouseDrag = function(event) {
                myPath.add(event.point);
                // myPath.smooth()
                console.log(event.point)
            }

            const svg = `
<svg
   width="210mm"
   height="297mm"
   viewBox="0 0 210 297"
   version="1.1"
   id="svg5"
   inkscape:version="1.1.2 (b8e25be8, 2022-02-05)"
   sodipodi:docname="test.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="0.55856481"
     inkscape:cx="396.55201"
     inkscape:cy="561.25984"
     inkscape:window-width="1312"
     inkscape:window-height="855"
     inkscape:window-x="0"
     inkscape:window-y="23"
     inkscape:window-maximized="0"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <path
       style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 54.473683,133.57894 c 2.309053,6.52389 5.103384,12.88691 9.947368,18.00001 1.602465,1.69148 7.516862,3.36572 9,3.78947 8.215344,2.34724 20.231724,5.06339 28.894739,2.8421 3.21552,-0.82449 6.03091,-2.77861 9,-4.26315 8.27335,-4.13668 15.89845,-8.52099 21.31579,-16.10527"
       id="path46" />
    <path
       style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 112.26316,83.842105 c 0,7.578947 0,15.157894 0,22.736845"
       id="path48" />
    <path
       style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 74.842104,84.315788 c 0,7.578948 0,15.157895 0,22.736842"
       id="path60" />
  </g>
</svg>
`;

            tool.onMouseUp = function(event) {
                // Get path data
                const paths = myPath.exportSVG();
                // console.log(paths)
                console.log(myPath.pathData);
                // console.log(myPath.pathData.replace(/,/g, ' '));

                // can you list all paths?
                console.log(paper.project.getItems()[0]._children); // is an array of paths and can get segments or pathData

                // read path from an svg ???? can use string or dom node 
                paper.project.importSVG(svg)
                console.log(svg)

                //draw path
                var pathData = 'm 54.473683,133.57894 c 2.309053,6.52389 5.103384,12.88691 9.947368,18.00001 1.602465,1.69148 7.516862,3.36572 9,3.78947 8.215344,2.34724 20.231724,5.06339 28.894739,2.8421 3.21552,-0.82449 6.03091,-2.77861 9,-4.26315 8.27335,-4.13668 15.89845,-8.52099 21.31579,-16.10527';
                var path = new paper.Path(pathData);
                path.strokeColor = 'red';
                path.scale(5);
                myPath.simplify()
            }

        }
    </script>
</head>

<body>
    <canvas id="myCanvas" resize></canvas>
</body>

</html>